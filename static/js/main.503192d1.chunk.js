(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(32)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(10),r=a.n(i),o=(a(20),a(21),a(3)),c=a(4),u=a(7),l=a(5),d=a(2),m=a(6),h=a(8),p=(a(22),function(e){if(!e)return{};var t="#"===e.charAt(0)?e.substring(1,7):e;return{"--red":parseInt(t.substring(0,2),16),"--green":parseInt(t.substring(2,4),16),"--blue":parseInt(t.substring(4,6),16)}}),v=a(11),b=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props.quote,a=t.beginning,n=t.end,i=t.votes,r=t.origin,o=t.publicPlayer,c=t.bonus,u=this.props.status,l=u.player,d=u.phase,m="quoteBlock "+(i?"results":"input");return s.a.createElement("div",{className:m},s.a.createElement("div",{className:"bonus_quote"},s.a.createElement("div",{className:"bonus ".concat((l.judge||3===d)&&c?"visible":"hidden"),title:o&&o.name+" got a bonus point for creativity!"},s.a.createElement(v.a,null)),s.a.createElement("button",{onClick:function(){return 3===d||e.props.sendRequest(e.props.quote)},disabled:this.props.disabled||i,className:"box ".concat(o&&o.judge?"correct":""),style:p(null===o||void 0===o?void 0:o.color)},s.a.createElement("div",{className:"quote"},o&&s.a.createElement("div",{className:"player"},o.name,s.a.createElement("span",{className:"judge",style:{visibility:o.judge?"visible":"hidden"}},s.a.createElement(h.a,null))),0===d&&s.a.createElement("div",{className:"origin"},r),a+"... "+n))),s.a.createElement("div",null,i&&s.a.createElement("div",{className:"votes"},i.map((function(e){return s.a.createElement("div",{title:o.judge?"".concat(e.name," voted for the correct quote!"):"".concat(e.name," voted for ").concat(o.name,"'s quote!"),id:e.name+"_vote",className:"vote",style:p(e.color)},e.name)})))))}}]),t}(n.Component),y=(a(23),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"scores"},this.props.players.map((function(t){return s.a.createElement("div",{title:t.judge?t.name+" is the judge!":t.name,className:"score",style:p(t.color)},t.name,e.props.phase>-1&&" : ".concat(t.score),e.props.phase>-1&&s.a.createElement("span",{className:"judge",style:{visibility:t.judge?"visible":"hidden"}},s.a.createElement(h.a,null)," "))})))}}]),t}(n.Component)),g=a(14),f=a(12),j=a.n(f),E=(a(26),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={id:j.a.uniqueId("input_"),helperText:""},a.onChange=a.onChange.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onChange",value:function(e){var t=this.props,a=t.pattern,n=t.min,s=t.max,i=t.message,r=e.target.value;a&&r&&!r.match(a)?this.setState({helperText:i||"Input is invalid."}):n&&r&&parseInt(r)<n?this.setState({helperText:"Value must be greater than or equal to ".concat(n)}):s&&r&&parseInt(r)>s?this.setState({helperText:"Value must be less than or equal to ".concat(s)}):this.setState({helperText:""}),this.props.onChange(e)}},{key:"render",value:function(){var e=this.props,t=e.label,a=e.id,n=(e.onChange,Object(g.a)(e,["label","id","onChange"]));return s.a.createElement("div",Object.assign({className:"wordsmyth_input",id:a},n),t&&s.a.createElement("label",{htmlFor:this.state.id},t),s.a.createElement("input",Object.assign({id:this.state.id,onChange:this.onChange},n)),this.state.helperText.length>0&&s.a.createElement("span",{className:"error"},this.state.helperText))}}]),t}(n.Component)),O=(a(27),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={quote:e.quote},a.setQuote=a.setQuote.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"setQuote",value:function(e){var t=this.props.quote;t.end=e.target.value,this.setState({quote:t})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"writing"},s.a.createElement("div",{id:"beginning"},this.props.quote.beginning+"... "),s.a.createElement(E,{type:"text",id:"quoteEnd",disabled:this.props.disabled,onChange:this.setQuote}),s.a.createElement("button",{disabled:this.props.disabled,onClick:function(){e.props.sendRequest(e.state.quote)}},"Submit"))}}]),t}(n.Component)),k=(a(28),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.timer;return s.a.createElement("div",{className:"wordsmyth_timer"},s.a.createElement("div",{className:"timer",style:{width:"".concat(parseInt(e.time)/parseInt(e.total)*100,"%")}}))}}]),t}(n.Component)),q=(a(29),{"-1":{judge:"Waiting for more players to join!",players:"Waiting for more players to join!",first:"Click start whenever you're ready!"},0:{judge:"Choose one of these real quotes! Your friends will make up their own endings for the one you choose!",players:"Waiting for the judge to choose a quote now!"},1:{judge:"Waiting for your friends to write their own endings to the quote you've chosen!",players:"Finish the quote! Try to make it realistic so you can fool your friends. Here's a hint: check your spelling and punctuation!"},2:{judge:"While you wait for your friends to guess the correct quote, feel free to award some bonus points for creativity!",players:"Which quote do you think is the real one? Think carefully..."},3:{judge:"Let's see how everybody did!",players:"Let's see how everybody did!",first:"Click continue whenever you're ready!"},4:{judge:"Well done, everybody!",players:"Well done, everybody!"}}),C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).sendRequest=a.sendRequest.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"sendRequest",value:function(e){if(e.target&&(e={}),this.props.status.expectedRequest){var t=this.props.status.expectedRequest;t.name=this.props.playerName,t.gameId=this.props.gameId,t.quote=e,this.props.sendObject(t)}}},{key:"getRound",value:function(e){var t=e.quotes||e.playerQuotes;return!!t&&s.a.createElement("div",null,0!==e.phase&&(t.length>0?s.a.createElement("div",{id:"quoteorigin"}," There's an old ",t[0].origin," saying: "):s.a.createElement("div",{id:"emptyquotes"}," Looks like no one submitted this round.",s.a.createElement("br",null)," Is everyone okay? ")),this.displayQuotes(e))}},{key:"displayQuotes",value:function(e){var t=this;return e.quotes?e.quotes.length>1?e.quotes.map((function(a){return s.a.createElement(b,{status:e,quote:a,sendRequest:t.sendRequest})})):s.a.createElement(O,{quote:e.quotes[0],disabled:!this.props.status.expectedRequest,sendRequest:this.sendRequest}):e.playerQuotes?e.playerQuotes.map((function(a){return s.a.createElement(b,{disabled:!t.props.status.expectedRequest,status:e,quote:a,sendRequest:t.sendRequest})})):void 0}},{key:"render",value:function(){var e=this.props,t=e.status,a=e.timer;return console.log(t.phase),s.a.createElement("div",{id:"game"},s.a.createElement("div",{id:"header",style:p(t.player.color)},s.a.createElement("div",{id:"top"},s.a.createElement("div",{id:"title"},"Wordsmyth"),s.a.createElement("div",{id:"info"},s.a.createElement("div",{id:"username"},this.props.playerName,s.a.createElement("span",{className:"judge",title:"You're the judge this round!",style:{visibility:t.player.judge?"visible":"hidden"}},s.a.createElement(h.a,null))),s.a.createElement("div",{id:"gameid"},t.gameId))),a&&a.time>0&&s.a.createElement(k,{timer:a})),s.a.createElement("div",{id:"helperText"},q[t.phase][t.player.judge?"judge":"players"]),this.getRound(t),4===t.phase&&s.a.createElement("div",{id:"winner"},s.a.createElement("div",{style:p(t.players[0].color),className:"player"},t.players[0].name),"won!"),t.expectedRequest&&(-1===t.phase||3===t.phase)&&s.a.createElement("div",{id:"waiting"},q[t.phase].first,s.a.createElement("button",{onClick:this.sendRequest},t.expectedRequest.action)),this.props.status.players&&s.a.createElement(y,{phase:t.phase,players:this.props.status.players}),4===t.phase&&s.a.createElement("button",{onClick:this.sendRequest},t.expectedRequest.action),4===t.phase&&s.a.createElement("div",{style:{height:"30%"}}))}}]),t}(n.Component),N=a(13),w=(a(30),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={new:!0,username:"",rounds:3,timer:60,gameId:""},a.join=a.join.bind(Object(d.a)(a)),a.create=a.create.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"join",value:function(){var e={type:"request",action:"join",name:this.state.username,gameId:this.state.gameId};this.props.sendObject(e)}},{key:"create",value:function(){this.state.username&&""!==this.state.username||alert("Please enter a username!");var e={type:"request",action:"create",max_timer:this.state.timer,max_rounds:this.state.rounds,name:this.state.username};this.props.sendObject(e)}},{key:"setField",value:function(e,t){this.setState(Object(N.a)({},e,t))}},{key:"getInputs",value:function(){var e=this;return this.state.new?s.a.createElement("div",{id:"form"},s.a.createElement(E,{onChange:function(t){return e.setField("username",t.target.value)},value:this.state.username,type:"text",label:"Player's name"}),s.a.createElement("div",{id:"params"},s.a.createElement(E,{onChange:function(t){return e.setField("rounds",t.target.value)},value:this.state.rounds,type:"number",label:"Number of rounds",min:1,max:15}),s.a.createElement("div",{className:"spacer"}),s.a.createElement(E,{onChange:function(t){return e.setField("timer",t.target.value)},value:this.state.timer,type:"number",label:"Timer (in seconds)",min:30,max:360})),s.a.createElement("button",{onClick:this.create},"Create Game")):s.a.createElement("div",{id:"form"},s.a.createElement(E,{onChange:function(t){return e.setField("username",t.target.value)},value:this.state.username,type:"text",label:"Player's name"}),s.a.createElement(E,{onChange:function(t){return e.setField("gameId",t.target.value.toUpperCase())},value:this.state.gameId,type:"text",label:"Room code",pattern:/^[a-zA-Z0-9]{6}$/,message:"Game code must be alphanumeric and 6 characters long."}),s.a.createElement("button",{onClick:this.join},"Join Game"))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{id:"join"},s.a.createElement("div",{className:"nav"},s.a.createElement("div",{className:"navitem ".concat(this.state.new?"selected":""),onClick:function(){return e.setState({new:!0})}},"Start a new Game?"),s.a.createElement("div",{className:"navitem ".concat(this.state.new?"":"selected"),onClick:function(){return e.setState({new:!1})}},"Or join a friend's?")),this.getInputs())}}]),t}(n.Component)),I=(a(31),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={playerName:"",gameId:"",status:{}},a.connection=null,a.handleServerCommunication=a.handleServerCommunication.bind(Object(d.a)(a)),a.sendObject=a.sendObject.bind(Object(d.a)(a)),a.create=a.create.bind(Object(d.a)(a)),a.join=a.join.bind(Object(d.a)(a)),a.leave=a.leave.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.connection=new WebSocket("wss://server.amrictor.com"),this.connection.onopen=function(){console.log("Connected!")},this.connection.onerror=function(e){console.log("WebSocket Error "+e),alert("Cannot reach server!")},this.connection.onmessage=function(e){var t=JSON.parse(e.data);this.handleServerCommunication(t)}.bind(this),this.connection.onclose=function(e){console.log("Connection lost")},this.checkCookie()}},{key:"handleServerCommunication",value:function(e){switch(e.type){case"status":this.setState({status:e},document.documentElement.style.setProperty("--buttonColor",this.state.status.color));break;case"response":e.message?((e.message.includes("No game with code")||e.message.includes("Player does not exist"))&&this.setUser(),alert(e.message)):this.setUser(e);break;case"time":this.setState({timer:{time:e.time,total:e.total}});break;case"quit":this.setUser(),window.location.reload();break;default:alert(JSON.stringify(e))}}},{key:"setUser",value:function(e){var t=e||{playerName:"",gameId:""},a=t.playerName,n=t.gameId;this.setCookie(a,n,1),this.setState({playerName:a,gameId:n})}},{key:"sendObject",value:function(e){var t=this;!function e(a){setTimeout((function(){1===t.connection.readyState?null!=a&&a():e(a)}),5)}((function(){return t.connection.send(JSON.stringify(e))}))}},{key:"setCookie",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=new Date;n.setTime(n.getTime()+60*a*1e3);var s=0===a?"":"max-age="+60*a*1e3+";path=/";document.cookie="playerName="+e+";"+s,document.cookie="gameId="+t+";"+s}},{key:"getCookie",value:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var s=a[n];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return""}},{key:"checkCookie",value:function(){var e=this.getCookie("playerName"),t=this.getCookie("gameId");void 0!==e&&this.setState({playerName:e,gameId:t},this.requestStatus)}},{key:"requestStatus",value:function(){if("undefined"!==this.state.playerName&&"undefined"!==this.state.gameId){var e={type:"request",action:"status",name:this.state.playerName,gameId:this.state.gameId};this.sendObject(e)}}},{key:"create",value:function(){var e=document.getElementById("username").value;e&&""!==e||alert("Please enter a username!");var t={type:"request",action:"create",name:document.getElementById("username").value};this.sendObject(t)}},{key:"join",value:function(){var e={type:"request",action:"join",name:document.getElementById("username").value,gameId:document.getElementById("gameid").value};this.sendObject(e)}},{key:"leave",value:function(){var e={type:"request",action:"leave",name:this.state.playerName,gameId:this.state.gameId};this.sendObject(e)}},{key:"render",value:function(){return this.state.status.player?s.a.createElement(C,{status:this.state.status,timer:this.state.timer,sendObject:this.sendObject,playerName:this.state.playerName,gameId:this.state.gameId}):s.a.createElement(w,{sendObject:this.sendObject})}}]),t}(n.Component));var x=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(I,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[15,1,2]]]);
//# sourceMappingURL=main.503192d1.chunk.js.map